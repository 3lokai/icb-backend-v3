schema: 1
story: 'H.1'
story_title: 'Unit tests: parsers & normalizer fixes'
gate: CONCERNS
status_reason: 'Significant progress made - 12 tests fixed (44% improvement). 15 remaining tests need attention.'
reviewer: 'Quinn (Test Architect)'
updated: '2025-01-01T17:50:00Z'

top_issues:
  - id: 'TEST-001'
    severity: low
    finding: 'VariantModel weight attribute mismatch - FIXED: Used existing _map_weight_grams() method'
    suggested_action: 'COMPLETED - Fixed variant.weight access using C.1 pattern'
    suggested_owner: 'dev'
  - id: 'TEST-002'
    severity: medium
    finding: 'RPC parameter test failures - missing p_bean_species, p_content_hash, p_acidity in test expectations'
    suggested_action: 'Update test expectations to match current RPC parameter structure'
    suggested_owner: 'dev'
  - id: 'TEST-003'
    severity: low
    finding: 'Import path issues in test modules causing relative import errors'
    suggested_action: 'Fix import paths in test modules to resolve relative import issues'
    suggested_owner: 'dev'
  - id: 'TEST-004'
    severity: low
    finding: 'Memory leak in performance tests - 55MB vs 50MB limit'
    suggested_action: 'Fix memory usage in price-only performance tests'
    suggested_owner: 'dev'

waiver: { active: false }

quality_score: 70
expires: '2025-01-15T17:50:00Z'

evidence:
  tests_reviewed: 1384
  risks_identified: 4
  trace:
    ac_covered: [1, 2, 3, 4, 5, 6, 7]
    ac_gaps: []

nfr_validation:
  security:
    status: PASS
    notes: 'No security concerns identified'
  performance:
    status: CONCERNS
    notes: 'Memory leak in performance tests needs investigation'
  reliability:
    status: CONCERNS
    notes: '27 failing tests need fixes but are test-specific issues'
  maintainability:
    status: PASS
    notes: 'Test infrastructure is well-organized and maintainable'

recommendations:
  immediate:
    - action: 'Fix VariantModel weight attribute tests - update to use grams/weight_unit'
      refs: ['tests/validator/test_integration_service_*.py']
    - action: 'Update RPC parameter test expectations'
      refs: ['tests/integration/test_a1_a5_pipeline_integration.py']
    - action: 'Fix import paths in test modules'
      refs: ['tests/validator/test_real_rpc_with_real_data.py']
  future:
    - action: 'Review test fixture alignment with current models'
      refs: ['tests/parser/fixtures/']
    - action: 'Optimize performance test memory usage'
      refs: ['tests/images/test_price_only_performance.py']
