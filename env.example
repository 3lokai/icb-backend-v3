# Database Configuration
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
DATABASE_URL=postgresql://user:password@host:port/database

# Redis Configuration
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=

# Worker Configuration
WORKER_CONCURRENCY=3
WORKER_MAX_RETRIES=5
WORKER_BACKOFF_FACTOR=2

# =============================================================================
# FIRECRAWL CONFIGURATION (E.1) - Complete Firecrawl Settings
# =============================================================================

# Core Firecrawl API Configuration
FIRECRAWL_API_KEY=your_firecrawl_api_key
FIRECRAWL_BASE_URL=https://api.firecrawl.dev
FIRECRAWL_ENABLED=true

# Budget and Rate Limiting
FIRECRAWL_BUDGET_LIMIT=1000
FIRECRAWL_RATE_LIMIT_PER_MINUTE=60

# Discovery and Mapping Settings
FIRECRAWL_MAX_PAGES=50
FIRECRAWL_INCLUDE_SUBDOMAINS=false
FIRECRAWL_SITEMAP_ONLY=false

# Coffee Keywords Configuration
# JSON array format - can override DEFAULT_COFFEE_KEYWORDS from tasks.py
# Example: ["coorg","karnataka","indian coffee","filter coffee","chicory"]
FIRECRAWL_COFFEE_KEYWORDS=
# Alternative lowercase format (for batch operations)
firecrawl_coffee_keywords=

# Timeout and Retry Configuration
FIRECRAWL_TIMEOUT=30.0
FIRECRAWL_MAX_RETRIES=3
FIRECRAWL_RETRY_DELAY=1.0
FIRECRAWL_MAX_RETRY_DELAY=60.0
# Note: Uses WORKER_MAX_RETRIES, WORKER_BACKOFF_FACTOR for retry logic

# Monitoring and Logging
FIRECRAWL_ENABLE_MONITORING=true
FIRECRAWL_LOG_LEVEL=INFO
FIRECRAWL_PERFORMANCE_MONITORING_ENABLED=true

# Alert Thresholds
FIRECRAWL_ALERT_FAILURE_RATE_THRESHOLD=25.0
FIRECRAWL_ALERT_BUDGET_USAGE_THRESHOLD=80.0
FIRECRAWL_ALERT_OPERATION_TIME_THRESHOLD=60.0
FIRECRAWL_ALERT_BUDGET_EXHAUSTED_THRESHOLD=100.0

# Alert Cooldowns (minutes)
FIRECRAWL_ALERT_FAILURE_RATE_COOLDOWN=15
FIRECRAWL_ALERT_BUDGET_USAGE_COOLDOWN=5
FIRECRAWL_ALERT_OPERATION_TIME_COOLDOWN=10
FIRECRAWL_ALERT_BUDGET_EXHAUSTED_COOLDOWN=0

# Monitoring Intervals
FIRECRAWL_HEALTH_CHECK_INTERVAL=60
FIRECRAWL_BUDGET_CHECK_INTERVAL=300

# DeepSeek API Configuration (D.1)
DEEPSEEK_API_KEY=your_deepseek_api_key_here
DEEPSEEK_MODEL=deepseek-chat
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
DEEPSEEK_TEMPERATURE=0.7
DEEPSEEK_MAX_TOKENS=1000
DEEPSEEK_TIMEOUT=30

# LLM Cache Configuration (D.1)
CACHE_BACKEND=memory
CACHE_TTL=3600
CACHE_TABLE=llm_cache

# ImageKit Configuration (F.2)
IMAGEKIT_PUBLIC_KEY=your_imagekit_public_key
IMAGEKIT_PRIVATE_KEY=your_imagekit_private_key
IMAGEKIT_URL_ENDPOINT=https://ik.imagekit.io/your_imagekit_id
IMAGEKIT_FOLDER=/coffee-images/
IMAGEKIT_ENABLED=true

# Image Deduplication Configuration (F.1)
IMAGE_DEDUPLICATION_ENABLED=true
IMAGE_HASH_CACHE_SIZE=1000
IMAGE_HASH_CACHE_TTL=3600
IMAGE_PROCESSING_TIMEOUT=30
IMAGE_PROCESSING_MAX_RETRIES=3

# Performance Monitoring (G.1)
ENABLE_IMAGE_PERFORMANCE_MONITORING=true
IMAGE_PROCESSING_METRICS_ENABLED=true
# Note: Firecrawl performance monitoring is now in the main Firecrawl section above

# Prometheus Configuration (G.1) - Cloud Services
PROMETHEUS_PORT=8000
PROMETHEUS_HOST=0.0.0.0
PROMETHEUS_ENABLED=true
PROMETHEUS_INTERNAL_ONLY=true

# Grafana Configuration (G.1) - Cloud Services
GRAFANA_CLOUD_ENABLED=true
GRAFANA_CLOUD_URL=https://your-instance.grafana.net
GRAFANA_CLOUD_API_KEY=your_grafana_cloud_api_key
GRAFANA_CLOUD_PROMETHEUS_URL=https://your-instance.grafana.net/api/prom/push
GRAFANA_CLOUD_PROMETHEUS_USERNAME=your_prometheus_username
GRAFANA_CLOUD_PROMETHEUS_PASSWORD=your_prometheus_password

# Self-hosted (Disabled - using cloud services)
GRAFANA_SELF_HOSTED=false
PROMETHEUS_SELF_HOSTED=false

# Sentry Configuration (Cloud-based)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=development

# Slack Configuration (Free Tier)
SLACK_WEBHOOK_URL=your_slack_webhook_url_here
SLACK_ALERTS_ENABLED=true

# Alert Configuration (G.2) - Story-Specific Thresholds Only
# Thresholds (as specified in G.2 story)
ALERT_REVIEW_RATE_THRESHOLD=50.0
ALERT_RPC_ERROR_THRESHOLD=10.0
ALERT_SYSTEM_HEALTH_THRESHOLD=30.0

# Cooldowns (minutes) - Story-Specific
ALERT_REVIEW_RATE_COOLDOWN=10
ALERT_RPC_ERROR_COOLDOWN=5
ALERT_SYSTEM_HEALTH_COOLDOWN=5

# Alert Throttling
ALERT_THROTTLE_WINDOW=300
ALERT_MAX_PER_WINDOW=10

# Monitoring Intervals
ALERT_CHECK_INTERVAL=60
METRICS_COLLECTION_INTERVAL=30

# Note: Firecrawl monitoring intervals are now in the main Firecrawl section above

# Alert Escalation
ALERT_ESCALATION_ENABLED=true
ALERT_ESCALATION_DELAY=15

# Notification Preferences
SLACK_NOTIFICATIONS_ENABLED=true
SENTRY_NOTIFICATIONS_ENABLED=true
EMAIL_NOTIFICATIONS_ENABLED=false

# Debug Settings
ALERT_DEBUG_MODE=false
ALERT_LOG_ATTEMPTS=true

# Fly.io Deployment Configuration
FLY_APP_NAME=your_coffee_scraper_app
FLY_REGION=iad
MONITORING_INTERNAL_NETWORK=true

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# Development
ENVIRONMENT=development
DEBUG=false
